<template name="gritsSearchAndAdvancedFiltration">
  <style>
    .bootstrap-datetimepicker-widget table td.day {
      width: 28px;
    }
  </style>
  <div>
    {{#if state }}
      <i class="fa fa-exclamation-circle filter-status" title="Recent changes have not been applied"></i>
    {{/if}}
    <div class="searchBar" id="departureSearchMainSearchBar">
      <div class="tokenized main">
        <i id="searchIcon" class="fa fa-search" style="
            position: absolute;
            top: 4px;
            left: 5px;
            font-size: xx-large;
            color: #496c8a;
        "></i>
        <input id="departureSearchMain" class="form-control input-sm advanced-filter-status" name="departureSearchMain" placeholder='{{_ "gritsFilter.tokenfield-placeholder"}}' />
      </div>
    </div>
    <div class="row fliter-row" id="includeNearbyAirportsContainer">
      <div class="col-xs-7" id="includeNearbyAirportsDiv">
        <input type="checkbox" name="includeNearbyAirports" id="includeNearbyAirports">
        <span>{{_ "gritsFilter.tab-1.include-nearby-label"}}</span>
      </div>
      <div class="col-xs-2" id="milesInput">
        <input type="number" id="includeNearbyAirportsRadius" class="form-control input-sm" min="1" max="500" value="50">
      </div>
      <div class="col-xs-2" id="milesText">
        <span>{{_ "gritsFilter.tab-1.miles-label"}}</span>
      </div>
      <div class="col-xs-1"></div>
    </div>
  </div>
  <div id="filter" class="clearfix">
    <div class="row filter-row">
      <div class="col-xs-12">
        <span class="filter-heading">{{_ "gritsFilter.title"}}</span>
      </div>
    </div>
    <ul class="nav nav-tabs">
      <li class="active"><a href="#flight" data-toggle="tab" id="flightTab"><i class="fa fa-plane"></i> {{_ "gritsFilter.tab-1.title"}}</a></li>
      <li><a href="#date" data-toggle="tab" id="dateTab"><i class="fa fa-calendar"></i> {{_ "gritsFilter.tab-2.title"}}</a></li>
    </ul>
    <div class="tableDivider"></div>
    <div class="tab-content">
      <div class="tab-pane active" id="flight">
        <!-- start flight tab content -->
        <div class="row filter-first-row">
          <div class="col-xs-12">
            <span class="filter-label">{{_ "gritsFilter.tab-1.stops-label"}}:</span>
          </div>
        </div>
        <div class='legend-scale'>
          <div class='slider-container'>
            <input type="text"
                   class="slider"
                   id="stopsInputSlider"
                   value=""
                   data-slider-min="0"
                   data-slider-max="5"
                   data-slider-step="1"
                   data-slider-value="[0,5]"
                   data-slider-orientation="horizontal"
                   data-slider-selection="after"
                   data-slider-tooltip="show"
                   style="position:relative; top:0; left:0; width:100%;">
          </div>
        </div>

        <div class="row filter-first-row">
          <div class="col-xs-12">
            <span class="filter-label">{{_ "gritsFilter.tab-1.seats-label"}}:</span>
          </div>
        </div>
        <div class='legend-scale'>
          <div class='slider-container'>
            <input type="text"
                   class="slider"
                   value=""
                   data-slider-min="0"
                   data-slider-max="900"
                   data-slider-step="1"
                   data-slider-value="[0,900]"
                   data-slider-orientation="horizontal"
                   data-slider-selection="after"
                   data-slider-tooltip="show"
                   style="position:relative; top:0; left:0; width:100%;">
          </div>
        </div>

        <div class="row filter-first-row">
          <div class="col-xs-12">
            <span class="filter-label">{{_ "gritsFilter.tab-1.stops-label"}}:</span>
          </div>
        </div>
        <div class='legend-scale'>
          <div class='slider-container'>
            <input type="text"
                   class="slider"
                   value=""
                   data-slider-min="0"
                   data-slider-max="5"
                   data-slider-step="1"
                   data-slider-value="[0,5]"
                   data-slider-orientation="horizontal"
                   data-slider-selection="after"
                   data-slider-tooltip="show"
                   style="position:relative; top:0; left:0; width:100%;">
          </div>
        </div>

        <div class="row filter-first-row">
          <div class="col-xs-12">
            <span class="filter-label">{{_ "gritsFilter.tab-1.stops-label"}}:</span>
          </div>
        </div>
        <div class="row filter-row">
          <div class="col-xs-3">
            <select id="stopsOperator" class="form-control input-sm advanced-filter-status">
              <option value="$gte"><span> &gt;= </span></option>
              <option value="$gt"><span> &gt; </span></option>
              <option value="$lte"><span> &lt;= </span></option>
              <option value="$lt"><span> &lt; </span></option>
              <option value="$eq"><span> == </span></option>
              <option value="$ne"><span> != </span></option>
            </select>
          </div>
          <div class="col-xs-3">
            <input type="number" id="stopsInput" class="form-control input-sm advanced-filter-status" min="0" max="5" value="{{stops}}">
          </div>
          <div class="col-xs-6"></div>
        </div>
        <div class="row filter-row">
          <div class="col-xs-12">
            <span class="filter-label">{{_ "gritsFilter.tab-1.seats-label"}}:</span>
          </div>
        </div>
        <div class="row filter-row">
          <div class="col-xs-3">
            <select id="seatsOperator" class="form-control input-sm advanced-filter-status">
              <option value="$gte"><span> &gt;= </span></option>
              <option value="$gt"><span> &gt; </span></option>
              <option value="$lte"><span> &lt;= </span></option>
              <option value="$lt"><span> &lt; </span></option>
              <option value="$eq"><span> == </span></option>
              <option value="$ne"><span> != </span></option>
            </select>
          </div>
          <div class="col-xs-3">
            <input type="number" id="seatsInput" class="form-control input-sm advanced-filter-status" min="0" max="525" value="{{seats}}">
          </div>
          <div class="col-xs-6"></div>
        </div>
        <div class="row filter-row">
          <div class="col-xs-12">
            <span class="filter-label">{{_ "gritsFilter.tab-1.levels-label"}}:</span>
          </div>
        </div>
        <div class="row filter-last-row">
          <div class="col-xs-3">
            <input type="number" id="connectednessLevels" min="1" value="{{levels}}" class="form-control input-sm advanced-filter-status">
          </div>
        </div>
        <!-- end flight tab content -->
      </div>
      <div class="tab-pane" id="date">
        <!-- start date tab content -->
        <div class="row filter-first-row">
          <div class="col-xs-12">
            <span class="filter-label">{{_ "gritsFilter.tab-2.operating-date-range"}}:</span>
          </div>
        </div>
        <div class="row filter-row">
          <div class='col-xs-12'>
            <div class="filter-group">
              <span class="filter-label">{{_ "gritsFilter.tab-2.start-label"}}:</span>
              <div class='input-group date' id='discontinuedDate' style="max-width: 300px;">
                <input type='text' class="date-button form-control input-sm" value="{{start}}"/>
                <span class="input-group-addon">
                  <span class="glyphicon glyphicon-calendar"></span>
                </span>
              </div>
            </div>
            <div class="filter-group">
              <span class="filter-label">{{_ "gritsFilter.tab-2.end-label"}}:</span>
                <div class='input-group date' id='effectiveDate' style="max-width: 300px;">
                    <input type='text' class="date-button form-control input-sm" value="{{end}}"/>
                    <span class="input-group-addon">
                      <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
            </div>
          </div>
        </div>
        <div class="row filter-row">
          <div class="col-xs-12">
            <span class="filter-label">{{_ "gritsFilter.tab-2.weekly-frequency-label"}}:</span>
          </div>
        </div>
        <div class="row filter-last-row">
          <div class="col-xs-3">
            <select id="weeklyFrequencyOperator" class="form-control input-sm advanced-filter-status">
              <option value="$gte"><span> &gt;= </span></option>
              <option value="$gt"><span> &gt; </span></option>
              <option value="$lte"><span> &lt;= </span></option>
              <option value="$lt"><span> &lt; </span></option>
              <option value="$eq"><span> == </span></option>
              <option value="$ne"><span> != </span></option>
            </select>
          </div>
          <div class="col-xs-3">
            <input type="number" id="weeklyFrequencyInput" class="form-control input-sm advanced-filter-status" min="0" max="7" value="{{weeklyFrequency}}">
          </div>
          <div class="col-xs-6"></div>
        </div>
        <!-- end date tab content -->
      </div>
    </div>
    <div class="filter-footer">
      <div class="row filter-row">
        <div class="col-xs-3">
          <span class="filter-label">{{_ "gritsFilter.limit-label"}}:</span>
        </div>
        <div class="col-xs-4">
          <input type="number" id="limit" class="form-control input-sm advanced-filter-status" value={{limit}}>
        </div>
        <div class="col-xs-5">
          <button id="loadMore" class="btn btn-sm btn-default pull-right" disabled="true">
            <span class="filter-label">{{_ "gritsFilter.more-button"}}</span> <img src="/packages/grits_grits-net-meteor/client/images/ajax-loader.gif" id="moreLoading" style="display: none;"/>
          </button>
        </div>
      </div>
      <!--
      <div class="row filter-row">
        <div class="col-xs-12">
          <button id="applyFilter" class="btn btn-sm btn-default">
            <span class="filter-label">
              {{_ "gritsFilter.apply-button"}}
            </span>
          </button>
          {{#if state }}
            <span class="filter-status-message">{{_ "gritsFilter.recent-changes"}}</span><i class="fa fa-exclamation-circle filter-status"></i>
          {{/if}}
        </div>
      </div>
      -->
      <div class="row row-status-bar">
        <div class="col-xs-6 col-status-bar">
          <span class="status-bar-text">{{_ "gritsFilter.loaded-records"}}:</span>
          <span class="status-bar-text status-bar-counter">{{ loadedRecords }}</span>
        </div>
        <div class="col-xs-6 col-status-bar">
          <span class="status-bar-text">{{_ "gritsFilter.total-records"}}:</span>
          <span class="status-bar-text status-bar-counter">{{ totalRecords }}</span>
        </div>
      </div>
    </div>
  </div>
</template>
